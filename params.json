{"note":"Don't delete this file! It's used internally to help with page regeneration.","name":"As3proto-win","tagline":"protobuf for Actionscript 3.0 on Windows platform","body":"# as3proto-win\r\n****************************\r\n\r\n### protobuf for Actionscript 3 on Windows\r\n================================================================\r\n该项目搭建了**AS3 protobuf**所需的**Windows**运行环境以及**AS3**类库，整合了**Google [protobuf][1]**和**[protoc-gen-as3][2]**第三方插件资源\r\n[1]: http://code.google.com/p/protobuf/ \"[2.4.1] http://code.google.com/p/protobuf/\"\r\n[2]: https://code.google.com/p/protoc-gen-as3/ \"https://code.google.com/p/protoc-gen-as3/\"\r\n\r\n### 目录说明\r\n===================\r\n1. **src**目录包含了**protobuf**编解码所需要的**AS3**代码库，需要导入项目\r\n2. **lib**目录包含了**AS3**代码库的**SWC**版本\r\n3. **proto**目录有一个简单的**hello.proto**文件，仅用作测试用途\r\n\r\n### protobuf使用帮助\r\n===================\r\n进入**sdk**目录，打开**setup.bat**文件，初始化一下配置\r\n* 把**PROTO_DIR**修改为**\\*.proto**文件的存储目录\r\n* 把**OUTPUT_DIR**修改为生成**AS3**代码的输出目录\r\n\r\n其实在默认配置下，直接运行**protobuf.bat**输入hello既可以在**OUTPUT_DIR**目录生成实例代码\r\n```\r\n----------------------------\r\nType proto file name:\r\nhello\r\n\r\n... ... ...\r\n\r\nC:\\Users\\larryhou\\Downloads\\protobuf\\protobuf\\sdk>.\\framework\\protoc.exe --proto\r\n_path=\"..\\proto\" --plugin=protoc-gen-as3=\".\\framework\\protoc-gen-as3.bat\" --as3_\r\nout=\"..\\output\" \"..\\proto\\hello.proto\"\r\n\r\nDONE! Press any key to process another proto file...\r\n```\r\n\r\n**hello.proto**文件内容  \r\n```\r\nmessage HelloWorld{\r\n    optional int32 code = 1;\r\n    optional string name = 2;\r\n    optional Info info = 3;\r\n\r\n    message Info{\r\n        optional string version = 1;\r\n    }\r\n}\r\n```\r\n\r\n**HelloWorld.as**代码内容   \r\n```actionscript\r\npackage  {\r\n\timport com.netease.protobuf.*;\r\n\tuse namespace com.netease.protobuf.used_by_generated_code;\r\n\timport com.netease.protobuf.fieldDescriptors.*;\r\n\timport flash.utils.Endian;\r\n\timport flash.utils.IDataInput;\r\n\timport flash.utils.IDataOutput;\r\n\timport flash.utils.IExternalizable;\r\n\timport flash.errors.IOError;\r\n\timport HelloWorld.Info;\r\n\t// @@protoc_insertion_point(imports)\r\n\r\n\t// @@protoc_insertion_point(class_metadata)\r\n\tpublic dynamic final class HelloWorld extends com.netease.protobuf.Message {\r\n\t\t/**\r\n\t\t *  @private\r\n\t\t */\r\n\t\tpublic static const CODE:FieldDescriptor$TYPE_INT32 = new FieldDescriptor$TYPE_INT32(\"HelloWorld.code\", \"code\", (1 << 3) | com.netease.protobuf.WireType.VARINT);\r\n\r\n\t\tprivate var code$field:int;\r\n\r\n\t\tprivate var hasField$0:uint = 0;\r\n\r\n\t\tpublic function clearCode():void {\r\n\t\t\thasField$0 &= 0xfffffffe;\r\n\t\t\tcode$field = new int();\r\n\t\t}\r\n\r\n\t\tpublic function get hasCode():Boolean {\r\n\t\t\treturn (hasField$0 & 0x1) != 0;\r\n\t\t}\r\n\r\n\t\tpublic function set code(value:int):void {\r\n\t\t\thasField$0 |= 0x1;\r\n\t\t\tcode$field = value;\r\n\t\t}\r\n\r\n\t\tpublic function get code():int {\r\n\t\t\treturn code$field;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t *  @private\r\n\t\t */\r\n\t\tpublic static const NAME:FieldDescriptor$TYPE_STRING = new FieldDescriptor$TYPE_STRING(\"HelloWorld.name\", \"name\", (2 << 3) | com.netease.protobuf.WireType.LENGTH_DELIMITED);\r\n\r\n\t\tprivate var name$field:String;\r\n\r\n\t\tpublic function clearName():void {\r\n\t\t\tname$field = null;\r\n\t\t}\r\n\r\n\t\tpublic function get hasName():Boolean {\r\n\t\t\treturn name$field != null;\r\n\t\t}\r\n\r\n\t\tpublic function set name(value:String):void {\r\n\t\t\tname$field = value;\r\n\t\t}\r\n\r\n\t\tpublic function get name():String {\r\n\t\t\treturn name$field;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t *  @private\r\n\t\t */\r\n\t\tpublic static const INFO:FieldDescriptor$TYPE_MESSAGE = new FieldDescriptor$TYPE_MESSAGE(\"HelloWorld.info\", \"info\", (3 << 3) | com.netease.protobuf.WireType.LENGTH_DELIMITED, function():Class { return HelloWorld.Info; });\r\n\r\n\t\tprivate var info$field:HelloWorld.Info;\r\n\r\n\t\tpublic function clearInfo():void {\r\n\t\t\tinfo$field = null;\r\n\t\t}\r\n\r\n\t\tpublic function get hasInfo():Boolean {\r\n\t\t\treturn info$field != null;\r\n\t\t}\r\n\r\n\t\tpublic function set info(value:HelloWorld.Info):void {\r\n\t\t\tinfo$field = value;\r\n\t\t}\r\n\r\n\t\tpublic function get info():HelloWorld.Info {\r\n\t\t\treturn info$field;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t *  @private\r\n\t\t */\r\n\t\toverride com.netease.protobuf.used_by_generated_code final function writeToBuffer(output:com.netease.protobuf.WritingBuffer):void {\r\n\t\t\tif (hasCode) {\r\n\t\t\t\tcom.netease.protobuf.WriteUtils.writeTag(output, com.netease.protobuf.WireType.VARINT, 1);\r\n\t\t\t\tcom.netease.protobuf.WriteUtils.write$TYPE_INT32(output, code$field);\r\n\t\t\t}\r\n\t\t\tif (hasName) {\r\n\t\t\t\tcom.netease.protobuf.WriteUtils.writeTag(output, com.netease.protobuf.WireType.LENGTH_DELIMITED, 2);\r\n\t\t\t\tcom.netease.protobuf.WriteUtils.write$TYPE_STRING(output, name$field);\r\n\t\t\t}\r\n\t\t\tif (hasInfo) {\r\n\t\t\t\tcom.netease.protobuf.WriteUtils.writeTag(output, com.netease.protobuf.WireType.LENGTH_DELIMITED, 3);\r\n\t\t\t\tcom.netease.protobuf.WriteUtils.write$TYPE_MESSAGE(output, info$field);\r\n\t\t\t}\r\n\t\t\tfor (var fieldKey:* in this) {\r\n\t\t\t\tsuper.writeUnknown(output, fieldKey);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t *  @private\r\n\t\t */\r\n\t\toverride com.netease.protobuf.used_by_generated_code final function readFromSlice(input:flash.utils.IDataInput, bytesAfterSlice:uint):void {\r\n\t\t\tvar code$count:uint = 0;\r\n\t\t\tvar name$count:uint = 0;\r\n\t\t\tvar info$count:uint = 0;\r\n\t\t\twhile (input.bytesAvailable > bytesAfterSlice) {\r\n\t\t\t\tvar tag:uint = com.netease.protobuf.ReadUtils.read$TYPE_UINT32(input);\r\n\t\t\t\tswitch (tag >> 3) {\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tif (code$count != 0) {\r\n\t\t\t\t\t\tthrow new flash.errors.IOError('Bad data format: HelloWorld.code cannot be set twice.');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t++code$count;\r\n\t\t\t\t\tthis.code = com.netease.protobuf.ReadUtils.read$TYPE_INT32(input);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tif (name$count != 0) {\r\n\t\t\t\t\t\tthrow new flash.errors.IOError('Bad data format: HelloWorld.name cannot be set twice.');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t++name$count;\r\n\t\t\t\t\tthis.name = com.netease.protobuf.ReadUtils.read$TYPE_STRING(input);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tif (info$count != 0) {\r\n\t\t\t\t\t\tthrow new flash.errors.IOError('Bad data format: HelloWorld.info cannot be set twice.');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t++info$count;\r\n\t\t\t\t\tthis.info = new HelloWorld.Info();\r\n\t\t\t\t\tcom.netease.protobuf.ReadUtils.read$TYPE_MESSAGE(input, this.info);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tsuper.readUnknown(input, tag);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\n```\r\n\r\n**Info.as**代码内容\r\n```actionscript\r\npackage  {\r\n\timport com.netease.protobuf.*;\r\n\tuse namespace com.netease.protobuf.used_by_generated_code;\r\n\timport com.netease.protobuf.fieldDescriptors.*;\r\n\timport flash.utils.Endian;\r\n\timport flash.utils.IDataInput;\r\n\timport flash.utils.IDataOutput;\r\n\timport flash.utils.IExternalizable;\r\n\timport flash.errors.IOError;\r\n\timport HelloWorld.Info;\r\n\t// @@protoc_insertion_point(imports)\r\n\r\n\t// @@protoc_insertion_point(class_metadata)\r\n\tpublic dynamic final class HelloWorld extends com.netease.protobuf.Message {\r\n\t\t/**\r\n\t\t *  @private\r\n\t\t */\r\n\t\tpublic static const CODE:FieldDescriptor$TYPE_INT32 = new FieldDescriptor$TYPE_INT32(\"HelloWorld.code\", \"code\", (1 << 3) | com.netease.protobuf.WireType.VARINT);\r\n\r\n\t\tprivate var code$field:int;\r\n\r\n\t\tprivate var hasField$0:uint = 0;\r\n\r\n\t\tpublic function clearCode():void {\r\n\t\t\thasField$0 &= 0xfffffffe;\r\n\t\t\tcode$field = new int();\r\n\t\t}\r\n\r\n\t\tpublic function get hasCode():Boolean {\r\n\t\t\treturn (hasField$0 & 0x1) != 0;\r\n\t\t}\r\n\r\n\t\tpublic function set code(value:int):void {\r\n\t\t\thasField$0 |= 0x1;\r\n\t\t\tcode$field = value;\r\n\t\t}\r\n\r\n\t\tpublic function get code():int {\r\n\t\t\treturn code$field;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t *  @private\r\n\t\t */\r\n\t\tpublic static const NAME:FieldDescriptor$TYPE_STRING = new FieldDescriptor$TYPE_STRING(\"HelloWorld.name\", \"name\", (2 << 3) | com.netease.protobuf.WireType.LENGTH_DELIMITED);\r\n\r\n\t\tprivate var name$field:String;\r\n\r\n\t\tpublic function clearName():void {\r\n\t\t\tname$field = null;\r\n\t\t}\r\n\r\n\t\tpublic function get hasName():Boolean {\r\n\t\t\treturn name$field != null;\r\n\t\t}\r\n\r\n\t\tpublic function set name(value:String):void {\r\n\t\t\tname$field = value;\r\n\t\t}\r\n\r\n\t\tpublic function get name():String {\r\n\t\t\treturn name$field;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t *  @private\r\n\t\t */\r\n\t\tpublic static const INFO:FieldDescriptor$TYPE_MESSAGE = new FieldDescriptor$TYPE_MESSAGE(\"HelloWorld.info\", \"info\", (3 << 3) | com.netease.protobuf.WireType.LENGTH_DELIMITED, function():Class { return HelloWorld.Info; });\r\n\r\n\t\tprivate var info$field:HelloWorld.Info;\r\n\r\n\t\tpublic function clearInfo():void {\r\n\t\t\tinfo$field = null;\r\n\t\t}\r\n\r\n\t\tpublic function get hasInfo():Boolean {\r\n\t\t\treturn info$field != null;\r\n\t\t}\r\n\r\n\t\tpublic function set info(value:HelloWorld.Info):void {\r\n\t\t\tinfo$field = value;\r\n\t\t}\r\n\r\n\t\tpublic function get info():HelloWorld.Info {\r\n\t\t\treturn info$field;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t *  @private\r\n\t\t */\r\n\t\toverride com.netease.protobuf.used_by_generated_code final function writeToBuffer(output:com.netease.protobuf.WritingBuffer):void {\r\n\t\t\tif (hasCode) {\r\n\t\t\t\tcom.netease.protobuf.WriteUtils.writeTag(output, com.netease.protobuf.WireType.VARINT, 1);\r\n\t\t\t\tcom.netease.protobuf.WriteUtils.write$TYPE_INT32(output, code$field);\r\n\t\t\t}\r\n\t\t\tif (hasName) {\r\n\t\t\t\tcom.netease.protobuf.WriteUtils.writeTag(output, com.netease.protobuf.WireType.LENGTH_DELIMITED, 2);\r\n\t\t\t\tcom.netease.protobuf.WriteUtils.write$TYPE_STRING(output, name$field);\r\n\t\t\t}\r\n\t\t\tif (hasInfo) {\r\n\t\t\t\tcom.netease.protobuf.WriteUtils.writeTag(output, com.netease.protobuf.WireType.LENGTH_DELIMITED, 3);\r\n\t\t\t\tcom.netease.protobuf.WriteUtils.write$TYPE_MESSAGE(output, info$field);\r\n\t\t\t}\r\n\t\t\tfor (var fieldKey:* in this) {\r\n\t\t\t\tsuper.writeUnknown(output, fieldKey);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t *  @private\r\n\t\t */\r\n\t\toverride com.netease.protobuf.used_by_generated_code final function readFromSlice(input:flash.utils.IDataInput, bytesAfterSlice:uint):void {\r\n\t\t\tvar code$count:uint = 0;\r\n\t\t\tvar name$count:uint = 0;\r\n\t\t\tvar info$count:uint = 0;\r\n\t\t\twhile (input.bytesAvailable > bytesAfterSlice) {\r\n\t\t\t\tvar tag:uint = com.netease.protobuf.ReadUtils.read$TYPE_UINT32(input);\r\n\t\t\t\tswitch (tag >> 3) {\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tif (code$count != 0) {\r\n\t\t\t\t\t\tthrow new flash.errors.IOError('Bad data format: HelloWorld.code cannot be set twice.');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t++code$count;\r\n\t\t\t\t\tthis.code = com.netease.protobuf.ReadUtils.read$TYPE_INT32(input);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tif (name$count != 0) {\r\n\t\t\t\t\t\tthrow new flash.errors.IOError('Bad data format: HelloWorld.name cannot be set twice.');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t++name$count;\r\n\t\t\t\t\tthis.name = com.netease.protobuf.ReadUtils.read$TYPE_STRING(input);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tif (info$count != 0) {\r\n\t\t\t\t\t\tthrow new flash.errors.IOError('Bad data format: HelloWorld.info cannot be set twice.');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t++info$count;\r\n\t\t\t\t\tthis.info = new HelloWorld.Info();\r\n\t\t\t\t\tcom.netease.protobuf.ReadUtils.read$TYPE_MESSAGE(input, this.info);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tsuper.readUnknown(input, tag);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\n```\r\n\r\n","google":"as3proto windows protocol buffer actionscript protobuf"}